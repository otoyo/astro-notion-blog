<div>
    <h2>ç€æ‰‹å¯èƒ½æ™‚æœŸ</h2>
    <p>æ¥½æ›²åˆ¶ä½œã€ä½œè©ãƒ»ç·¨æ›²ã®ã¿ã®ä¾é ¼ã«é–¢ã—ã¾ã—ã¦ã¯ã“ã¡ã‚‰ã‚’å‚è€ƒãã ã•ã„ï¼</p>
    <div id="widget"></div>
    <button id="loadMore">ã•ã‚‰ã«è¡¨ç¤º</button>

    <script>
        let offset = 12
        let data = []

        async function fetchData() {
            try {
                const response = await fetch(
                    'https://round-bird-aab3.mass0203ms.workers.dev/'
                )
                if (!response.ok) {
                    console.error(
                        'ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ',
                        response.statusText
                    )
                    return []
                }
                data = await response.json()
                render()
            } catch (error) {
                console.error('ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ', error)
            }
        }

        function render() {
            const widget = document.getElementById('widget')
            widget.innerHTML = ''

            const table = document.createElement('table')
            table.style.width = '100%'
            table.style.borderCollapse = 'collapse'

            // offsetã‹ã‚‰offset + 6ã¾ã§ã®ãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ç¤º
            const slicedData = data.slice(0, offset)

            for (let i = 0; i < slicedData.length; i += 6) {
                const dateRow = document.createElement('tr')
                const statusRow = document.createElement('tr')

                slicedData.slice(i, i + 6).forEach((item) => {
                    const dateCell = document.createElement('td')
                    dateCell.textContent = item.date
                    dateCell.style.border = '1px solid #ddd'
                    dateCell.style.padding = '8px'
                    dateCell.style.textAlign = 'center'

                    const statusCell = document.createElement('td')
                    statusCell.style.border = '1px solid #ddd'
                    statusCell.style.padding = '8px'
                    statusCell.style.textAlign = 'center'

                    let statusSymbol = ''
                    switch (item.status) {
                        case 'ç©ºãç„¡ã—':
                            statusSymbol = 'âŒ'
                            break
                        case 'å¿œç›¸è«‡':
                            statusSymbol = 'ğŸ”´'
                            break
                        case 'ç©ºãã‚ã‚Š':
                            statusSymbol = 'ğŸŸ¡'
                            break
                        case 'ç©ºã':
                            statusSymbol = 'ğŸŸ¢'
                            break
                    }

                    statusCell.textContent = `${statusSymbol} ${item.status}`
                    statusRow.appendChild(statusCell)
                    dateRow.appendChild(dateCell)
                })

                table.appendChild(dateRow)
                table.appendChild(statusRow)
            }

            widget.appendChild(table)
        }
        document.getElementById('loadMore').addEventListener('click', () => {
            offset += 6
            render()
        })

        fetchData()
    </script>
</div>

<style>
    #widget {
        display: block;
        width: 100%;
        max-width: 800px; /* ä»»æ„ã®æœ€å¤§å¹…ã‚’è¨­å®š */
        margin: auto; /* ä¸­å¤®ã«é…ç½® */
        padding: 10px;
        box-sizing: border-box;
    }
    button {
        display: block;
        margin: 0 auto; /* ä¸­å¤®ã«é…ç½® */
    }
    table {
        width: 100%;
        border-collapse: collapse;
    }
    th,
    td {
        border: 1px solid #ddd;
        padding: 8px;
        text-align: center;
    }
</style>
